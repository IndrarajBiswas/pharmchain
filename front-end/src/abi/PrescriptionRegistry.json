{
  "_format": "hh-sol-artifact-1",
  "contractName": "PrescriptionRegistry",
  "sourceName": "contracts/PrescriptionRegistry.sol",
  "abi": [
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "accessControlAddr",
          "type": "address"
        },
        {
          "internalType": "address",
          "name": "batchRegistryAddr",
          "type": "address"
        }
      ],
      "stateMutability": "nonpayable",
      "type": "constructor"
    },
    {
      "anonymous": false,
      "inputs": [
        {
          "indexed": true,
          "internalType": "string",
          "name": "prescriptionId",
          "type": "string"
        },
        {
          "indexed": true,
          "internalType": "address",
          "name": "pharmacy",
          "type": "address"
        },
        {
          "indexed": false,
          "internalType": "uint256",
          "name": "timestamp",
          "type": "uint256"
        }
      ],
      "name": "PrescriptionFulfilled",
      "type": "event"
    },
    {
      "anonymous": false,
      "inputs": [
        {
          "indexed": true,
          "internalType": "string",
          "name": "prescriptionId",
          "type": "string"
        },
        {
          "indexed": true,
          "internalType": "address",
          "name": "patient",
          "type": "address"
        },
        {
          "indexed": false,
          "internalType": "string",
          "name": "batchId",
          "type": "string"
        },
        {
          "indexed": false,
          "internalType": "string",
          "name": "ipfsCID",
          "type": "string"
        },
        {
          "indexed": true,
          "internalType": "address",
          "name": "issuedBy",
          "type": "address"
        },
        {
          "indexed": false,
          "internalType": "uint256",
          "name": "timestamp",
          "type": "uint256"
        }
      ],
      "name": "PrescriptionIssued",
      "type": "event"
    },
    {
      "inputs": [],
      "name": "accessControl",
      "outputs": [
        {
          "internalType": "contract IRoleAccessControl",
          "name": "",
          "type": "address"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [],
      "name": "batchRegistry",
      "outputs": [
        {
          "internalType": "contract IDrugBatchRegistry",
          "name": "",
          "type": "address"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "string",
          "name": "prescriptionId",
          "type": "string"
        }
      ],
      "name": "fulfillPrescription",
      "outputs": [],
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "string",
          "name": "prescriptionId",
          "type": "string"
        }
      ],
      "name": "getPrescription",
      "outputs": [
        {
          "components": [
            {
              "internalType": "string",
              "name": "prescriptionId",
              "type": "string"
            },
            {
              "internalType": "string",
              "name": "batchId",
              "type": "string"
            },
            {
              "internalType": "address",
              "name": "patient",
              "type": "address"
            },
            {
              "internalType": "string",
              "name": "ipfsCID",
              "type": "string"
            },
            {
              "internalType": "address",
              "name": "issuedBy",
              "type": "address"
            },
            {
              "internalType": "uint256",
              "name": "issuedAt",
              "type": "uint256"
            },
            {
              "internalType": "bool",
              "name": "fulfilled",
              "type": "bool"
            },
            {
              "internalType": "address",
              "name": "fulfilledBy",
              "type": "address"
            },
            {
              "internalType": "uint256",
              "name": "fulfilledAt",
              "type": "uint256"
            }
          ],
          "internalType": "struct PrescriptionRegistry.Prescription",
          "name": "",
          "type": "tuple"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "string",
          "name": "prescriptionId",
          "type": "string"
        },
        {
          "internalType": "string",
          "name": "batchId",
          "type": "string"
        },
        {
          "internalType": "address",
          "name": "patient",
          "type": "address"
        },
        {
          "internalType": "string",
          "name": "ipfsCID",
          "type": "string"
        }
      ],
      "name": "issuePrescription",
      "outputs": [],
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "string",
          "name": "",
          "type": "string"
        }
      ],
      "name": "prescriptions",
      "outputs": [
        {
          "internalType": "string",
          "name": "prescriptionId",
          "type": "string"
        },
        {
          "internalType": "string",
          "name": "batchId",
          "type": "string"
        },
        {
          "internalType": "address",
          "name": "patient",
          "type": "address"
        },
        {
          "internalType": "string",
          "name": "ipfsCID",
          "type": "string"
        },
        {
          "internalType": "address",
          "name": "issuedBy",
          "type": "address"
        },
        {
          "internalType": "uint256",
          "name": "issuedAt",
          "type": "uint256"
        },
        {
          "internalType": "bool",
          "name": "fulfilled",
          "type": "bool"
        },
        {
          "internalType": "address",
          "name": "fulfilledBy",
          "type": "address"
        },
        {
          "internalType": "uint256",
          "name": "fulfilledAt",
          "type": "uint256"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    }
  ],
  "bytecode": "0x608060405234801561001057600080fd5b5060405161124938038061124983398101604081905261002f9161007c565b600080546001600160a01b039384166001600160a01b031991821617909155600180549290931691161790556100af565b80516001600160a01b038116811461007757600080fd5b919050565b6000806040838503121561008f57600080fd5b61009883610060565b91506100a660208401610060565b90509250929050565b61118b806100be6000396000f3fe608060405234801561001057600080fd5b50600436106100625760003560e01c806313007d55146100675780632b21e808146100975780638344bcd7146100b7578063a116510a146100cc578063aa40b77b146100df578063d85dc61d146100f2575b600080fd5b60005461007a906001600160a01b031681565b6040516001600160a01b0390911681526020015b60405180910390f35b6100aa6100a5366004610c4a565b61011a565b60405161008e9190610cd7565b6100ca6100c5366004610dcf565b6103a4565b005b6100ca6100da366004610c4a565b61079f565b60015461007a906001600160a01b031681565b610105610100366004610c4a565b61097b565b60405161008e99989796959493929190610e6c565b60408051610120810182526060808252602082018190526000928201839052808201526080810182905260a0810182905260c0810182905260e081018290526101008101919091526002826040516101729190610ee7565b90815260200160405180910390206040518061012001604052908160008201805461019c90610f03565b80601f01602080910402602001604051908101604052809291908181526020018280546101c890610f03565b80156102155780601f106101ea57610100808354040283529160200191610215565b820191906000526020600020905b8154815290600101906020018083116101f857829003601f168201915b5050505050815260200160018201805461022e90610f03565b80601f016020809104026020016040519081016040528092919081815260200182805461025a90610f03565b80156102a75780601f1061027c576101008083540402835291602001916102a7565b820191906000526020600020905b81548152906001019060200180831161028a57829003601f168201915b505050918352505060028201546001600160a01b031660208201526003820180546040909201916102d790610f03565b80601f016020809104026020016040519081016040528092919081815260200182805461030390610f03565b80156103505780601f1061032557610100808354040283529160200191610350565b820191906000526020600020905b81548152906001019060200180831161033357829003601f168201915b505050918352505060048201546001600160a01b03908116602083015260058301546040830152600683015460ff811615156060840152610100900416608082015260079091015460a09091015292915050565b600054604051634cb2206360e11b81523360048201526001600160a01b039091169063996440c690602401602060405180830381865afa1580156103ec573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906104109190610f3d565b6104505760405162461bcd60e51b815260206004820152600c60248201526b2737ba1030903237b1ba37b960a11b60448201526064015b60405180910390fd5b60008451116104a15760405162461bcd60e51b815260206004820152601760248201527f496e76616c696420707265736372697074696f6e2049440000000000000000006044820152606401610447565b6002846040516104b19190610ee7565b9081526020016040518091039020600501546000146105035760405162461bcd60e51b815260206004820152600e60248201526d105b1c9958591e481a5cdcdd595960921b6044820152606401610447565b60008151116105475760405162461bcd60e51b815260206004820152601060248201526f125b9d985b1a590812541194c810d25160821b6044820152606401610447565b600154604051633e72909d60e21b81526000916001600160a01b03169063f9ca427490610578908790600401610f66565b600060405180830381865afa158015610595573d6000803e3d6000fd5b505050506040513d6000823e601f3d908101601f191682016040526105bd9190810190610f79565b92505050600081116106085760405162461bcd60e51b815260206004820152601460248201527310985d18da081b9bdd081c9959da5cdd195c995960621b6044820152606401610447565b6040805161012081018252868152602081018690526001600160a01b03851681830152606081018490523360808201524260a0820152600060c0820181905260e082018190526101008201529051600290610664908890610ee7565b90815260405190819003602001902081518190610681908261105f565b5060208201516001820190610696908261105f565b5060408201516002820180546001600160a01b0319166001600160a01b03909216919091179055606082015160038201906106d1908261105f565b5060808201516004820180546001600160a01b0319166001600160a01b0392831617905560a0830151600583015560c083015160068301805460e08601516001600160a81b0319909116921515610100600160a81b031916929092176101009284168302179055909201516007909101556040513391851690610755908890610ee7565b60405180910390207f7f6ffafffc7c2f38e4b2e8fffe2ddcf2fe82c1694260780c366949805cf680378786426040516107909392919061111f565b60405180910390a45050505050565b60005460405163dfb0fda360e01b81523360048201526001600160a01b039091169063dfb0fda390602401602060405180830381865afa1580156107e7573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019061080b9190610f3d565b6108485760405162461bcd60e51b815260206004820152600e60248201526d4e6f74206120706861726d61637960901b6044820152606401610447565b600060028260405161085a9190610ee7565b9081526020016040518091039020905080600501546000036108be5760405162461bcd60e51b815260206004820152601b60248201527f507265736372697074696f6e20646f6573206e6f7420657869737400000000006044820152606401610447565b600681015460ff16156109075760405162461bcd60e51b8152602060048201526011602482015270105b1c9958591e48199d5b199a5b1b1959607a1b6044820152606401610447565b6006810180543361010081026001600160a81b03199092169190911760011790915542600783015560405161093d908490610ee7565b604051908190038120428252907f487110a8c0b6409ba14baaf6ce968c1aa8f64c3d20e6bf30c07f860ad9536ee59060200160405180910390a35050565b80516020818301810180516002825292820191909301209152805481906109a190610f03565b80601f01602080910402602001604051908101604052809291908181526020018280546109cd90610f03565b8015610a1a5780601f106109ef57610100808354040283529160200191610a1a565b820191906000526020600020905b8154815290600101906020018083116109fd57829003601f168201915b505050505090806001018054610a2f90610f03565b80601f0160208091040260200160405190810160405280929190818152602001828054610a5b90610f03565b8015610aa85780601f10610a7d57610100808354040283529160200191610aa8565b820191906000526020600020905b815481529060010190602001808311610a8b57829003601f168201915b505050600284015460038501805494956001600160a01b03909216949193509150610ad290610f03565b80601f0160208091040260200160405190810160405280929190818152602001828054610afe90610f03565b8015610b4b5780601f10610b2057610100808354040283529160200191610b4b565b820191906000526020600020905b815481529060010190602001808311610b2e57829003601f168201915b5050505060048301546005840154600685015460079095015493946001600160a01b039283169491935060ff811692610100909104169089565b634e487b7160e01b600052604160045260246000fd5b604051601f8201601f1916810167ffffffffffffffff81118282101715610bc457610bc4610b85565b604052919050565b600067ffffffffffffffff821115610be657610be6610b85565b50601f01601f191660200190565b600082601f830112610c0557600080fd5b8135610c18610c1382610bcc565b610b9b565b818152846020838601011115610c2d57600080fd5b816020850160208301376000918101602001919091529392505050565b600060208284031215610c5c57600080fd5b813567ffffffffffffffff811115610c7357600080fd5b610c7f84828501610bf4565b949350505050565b60005b83811015610ca2578181015183820152602001610c8a565b50506000910152565b60008151808452610cc3816020860160208601610c87565b601f01601f19169290920160200192915050565b6020815260008251610120806020850152610cf6610140850183610cab565b91506020850151601f1980868503016040870152610d148483610cab565b935060408701519150610d3260608701836001600160a01b03169052565b606087015191508086850301608087015250610d4e8382610cab565b9250506080850151610d6b60a08601826001600160a01b03169052565b5060a085015160c085015260c0850151610d8960e086018215159052565b5060e0850151610100610da6818701836001600160a01b03169052565b959095015193019290925250919050565b6001600160a01b0381168114610dcc57600080fd5b50565b60008060008060808587031215610de557600080fd5b843567ffffffffffffffff80821115610dfd57600080fd5b610e0988838901610bf4565b95506020870135915080821115610e1f57600080fd5b610e2b88838901610bf4565b945060408701359150610e3d82610db7565b90925060608601359080821115610e5357600080fd5b50610e6087828801610bf4565b91505092959194509250565b6000610120808352610e808184018d610cab565b90508281036020840152610e94818c610cab565b6001600160a01b038b811660408601528482036060860152909150610eb9828b610cab565b988116608085015260a0840197909752505092151560c0840152921660e08201526101000152949350505050565b60008251610ef9818460208701610c87565b9190910192915050565b600181811c90821680610f1757607f821691505b602082108103610f3757634e487b7160e01b600052602260045260246000fd5b50919050565b600060208284031215610f4f57600080fd5b81518015158114610f5f57600080fd5b9392505050565b602081526000610f5f6020830184610cab565b600080600060608486031215610f8e57600080fd5b835167ffffffffffffffff811115610fa557600080fd5b8401601f81018613610fb657600080fd5b8051610fc4610c1382610bcc565b818152876020838501011115610fd957600080fd5b610fea826020830160208601610c87565b8095505050506020840151610ffe81610db7565b80925050604084015190509250925092565b601f82111561105a57600081815260208120601f850160051c810160208610156110375750805b601f850160051c820191505b8181101561105657828155600101611043565b5050505b505050565b815167ffffffffffffffff81111561107957611079610b85565b61108d816110878454610f03565b84611010565b602080601f8311600181146110c257600084156110aa5750858301515b600019600386901b1c1916600185901b178555611056565b600085815260208120601f198616915b828110156110f1578886015182559484019460019091019084016110d2565b508582101561110f5787850151600019600388901b60f8161c191681555b5050505050600190811b01905550565b6060815260006111326060830186610cab565b82810360208401526111448186610cab565b91505082604083015294935050505056fea2646970667358221220d08dbe5ef57bef195bb93a17d016ae881d515e98a53a2d447dee6bd6539510a164736f6c63430008140033",
  "deployedBytecode": "0x608060405234801561001057600080fd5b50600436106100625760003560e01c806313007d55146100675780632b21e808146100975780638344bcd7146100b7578063a116510a146100cc578063aa40b77b146100df578063d85dc61d146100f2575b600080fd5b60005461007a906001600160a01b031681565b6040516001600160a01b0390911681526020015b60405180910390f35b6100aa6100a5366004610c4a565b61011a565b60405161008e9190610cd7565b6100ca6100c5366004610dcf565b6103a4565b005b6100ca6100da366004610c4a565b61079f565b60015461007a906001600160a01b031681565b610105610100366004610c4a565b61097b565b60405161008e99989796959493929190610e6c565b60408051610120810182526060808252602082018190526000928201839052808201526080810182905260a0810182905260c0810182905260e081018290526101008101919091526002826040516101729190610ee7565b90815260200160405180910390206040518061012001604052908160008201805461019c90610f03565b80601f01602080910402602001604051908101604052809291908181526020018280546101c890610f03565b80156102155780601f106101ea57610100808354040283529160200191610215565b820191906000526020600020905b8154815290600101906020018083116101f857829003601f168201915b5050505050815260200160018201805461022e90610f03565b80601f016020809104026020016040519081016040528092919081815260200182805461025a90610f03565b80156102a75780601f1061027c576101008083540402835291602001916102a7565b820191906000526020600020905b81548152906001019060200180831161028a57829003601f168201915b505050918352505060028201546001600160a01b031660208201526003820180546040909201916102d790610f03565b80601f016020809104026020016040519081016040528092919081815260200182805461030390610f03565b80156103505780601f1061032557610100808354040283529160200191610350565b820191906000526020600020905b81548152906001019060200180831161033357829003601f168201915b505050918352505060048201546001600160a01b03908116602083015260058301546040830152600683015460ff811615156060840152610100900416608082015260079091015460a09091015292915050565b600054604051634cb2206360e11b81523360048201526001600160a01b039091169063996440c690602401602060405180830381865afa1580156103ec573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906104109190610f3d565b6104505760405162461bcd60e51b815260206004820152600c60248201526b2737ba1030903237b1ba37b960a11b60448201526064015b60405180910390fd5b60008451116104a15760405162461bcd60e51b815260206004820152601760248201527f496e76616c696420707265736372697074696f6e2049440000000000000000006044820152606401610447565b6002846040516104b19190610ee7565b9081526020016040518091039020600501546000146105035760405162461bcd60e51b815260206004820152600e60248201526d105b1c9958591e481a5cdcdd595960921b6044820152606401610447565b60008151116105475760405162461bcd60e51b815260206004820152601060248201526f125b9d985b1a590812541194c810d25160821b6044820152606401610447565b600154604051633e72909d60e21b81526000916001600160a01b03169063f9ca427490610578908790600401610f66565b600060405180830381865afa158015610595573d6000803e3d6000fd5b505050506040513d6000823e601f3d908101601f191682016040526105bd9190810190610f79565b92505050600081116106085760405162461bcd60e51b815260206004820152601460248201527310985d18da081b9bdd081c9959da5cdd195c995960621b6044820152606401610447565b6040805161012081018252868152602081018690526001600160a01b03851681830152606081018490523360808201524260a0820152600060c0820181905260e082018190526101008201529051600290610664908890610ee7565b90815260405190819003602001902081518190610681908261105f565b5060208201516001820190610696908261105f565b5060408201516002820180546001600160a01b0319166001600160a01b03909216919091179055606082015160038201906106d1908261105f565b5060808201516004820180546001600160a01b0319166001600160a01b0392831617905560a0830151600583015560c083015160068301805460e08601516001600160a81b0319909116921515610100600160a81b031916929092176101009284168302179055909201516007909101556040513391851690610755908890610ee7565b60405180910390207f7f6ffafffc7c2f38e4b2e8fffe2ddcf2fe82c1694260780c366949805cf680378786426040516107909392919061111f565b60405180910390a45050505050565b60005460405163dfb0fda360e01b81523360048201526001600160a01b039091169063dfb0fda390602401602060405180830381865afa1580156107e7573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019061080b9190610f3d565b6108485760405162461bcd60e51b815260206004820152600e60248201526d4e6f74206120706861726d61637960901b6044820152606401610447565b600060028260405161085a9190610ee7565b9081526020016040518091039020905080600501546000036108be5760405162461bcd60e51b815260206004820152601b60248201527f507265736372697074696f6e20646f6573206e6f7420657869737400000000006044820152606401610447565b600681015460ff16156109075760405162461bcd60e51b8152602060048201526011602482015270105b1c9958591e48199d5b199a5b1b1959607a1b6044820152606401610447565b6006810180543361010081026001600160a81b03199092169190911760011790915542600783015560405161093d908490610ee7565b604051908190038120428252907f487110a8c0b6409ba14baaf6ce968c1aa8f64c3d20e6bf30c07f860ad9536ee59060200160405180910390a35050565b80516020818301810180516002825292820191909301209152805481906109a190610f03565b80601f01602080910402602001604051908101604052809291908181526020018280546109cd90610f03565b8015610a1a5780601f106109ef57610100808354040283529160200191610a1a565b820191906000526020600020905b8154815290600101906020018083116109fd57829003601f168201915b505050505090806001018054610a2f90610f03565b80601f0160208091040260200160405190810160405280929190818152602001828054610a5b90610f03565b8015610aa85780601f10610a7d57610100808354040283529160200191610aa8565b820191906000526020600020905b815481529060010190602001808311610a8b57829003601f168201915b505050600284015460038501805494956001600160a01b03909216949193509150610ad290610f03565b80601f0160208091040260200160405190810160405280929190818152602001828054610afe90610f03565b8015610b4b5780601f10610b2057610100808354040283529160200191610b4b565b820191906000526020600020905b815481529060010190602001808311610b2e57829003601f168201915b5050505060048301546005840154600685015460079095015493946001600160a01b039283169491935060ff811692610100909104169089565b634e487b7160e01b600052604160045260246000fd5b604051601f8201601f1916810167ffffffffffffffff81118282101715610bc457610bc4610b85565b604052919050565b600067ffffffffffffffff821115610be657610be6610b85565b50601f01601f191660200190565b600082601f830112610c0557600080fd5b8135610c18610c1382610bcc565b610b9b565b818152846020838601011115610c2d57600080fd5b816020850160208301376000918101602001919091529392505050565b600060208284031215610c5c57600080fd5b813567ffffffffffffffff811115610c7357600080fd5b610c7f84828501610bf4565b949350505050565b60005b83811015610ca2578181015183820152602001610c8a565b50506000910152565b60008151808452610cc3816020860160208601610c87565b601f01601f19169290920160200192915050565b6020815260008251610120806020850152610cf6610140850183610cab565b91506020850151601f1980868503016040870152610d148483610cab565b935060408701519150610d3260608701836001600160a01b03169052565b606087015191508086850301608087015250610d4e8382610cab565b9250506080850151610d6b60a08601826001600160a01b03169052565b5060a085015160c085015260c0850151610d8960e086018215159052565b5060e0850151610100610da6818701836001600160a01b03169052565b959095015193019290925250919050565b6001600160a01b0381168114610dcc57600080fd5b50565b60008060008060808587031215610de557600080fd5b843567ffffffffffffffff80821115610dfd57600080fd5b610e0988838901610bf4565b95506020870135915080821115610e1f57600080fd5b610e2b88838901610bf4565b945060408701359150610e3d82610db7565b90925060608601359080821115610e5357600080fd5b50610e6087828801610bf4565b91505092959194509250565b6000610120808352610e808184018d610cab565b90508281036020840152610e94818c610cab565b6001600160a01b038b811660408601528482036060860152909150610eb9828b610cab565b988116608085015260a0840197909752505092151560c0840152921660e08201526101000152949350505050565b60008251610ef9818460208701610c87565b9190910192915050565b600181811c90821680610f1757607f821691505b602082108103610f3757634e487b7160e01b600052602260045260246000fd5b50919050565b600060208284031215610f4f57600080fd5b81518015158114610f5f57600080fd5b9392505050565b602081526000610f5f6020830184610cab565b600080600060608486031215610f8e57600080fd5b835167ffffffffffffffff811115610fa557600080fd5b8401601f81018613610fb657600080fd5b8051610fc4610c1382610bcc565b818152876020838501011115610fd957600080fd5b610fea826020830160208601610c87565b8095505050506020840151610ffe81610db7565b80925050604084015190509250925092565b601f82111561105a57600081815260208120601f850160051c810160208610156110375750805b601f850160051c820191505b8181101561105657828155600101611043565b5050505b505050565b815167ffffffffffffffff81111561107957611079610b85565b61108d816110878454610f03565b84611010565b602080601f8311600181146110c257600084156110aa5750858301515b600019600386901b1c1916600185901b178555611056565b600085815260208120601f198616915b828110156110f1578886015182559484019460019091019084016110d2565b508582101561110f5787850151600019600388901b60f8161c191681555b5050505050600190811b01905550565b6060815260006111326060830186610cab565b82810360208401526111448186610cab565b91505082604083015294935050505056fea2646970667358221220d08dbe5ef57bef195bb93a17d016ae881d515e98a53a2d447dee6bd6539510a164736f6c63430008140033",
  "linkReferences": {},
  "deployedLinkReferences": {}
}
